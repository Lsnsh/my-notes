# 表达式

- 一个表达式是一系列运算符和算子的组合，用来计算一个值
  - amount = x \* (1 + 0.033) \* (1 + 0.033) \* (1 + 0.033);
  - total = 57;
  - count = count + 1;
  - value = (min / 2) \* lastValue;

## 运算符

- 运算符（operator）是指进行运算的动作，比如加法运算符“+”，减法运算符“-”等。
- 算子（operand）是指参与运算的值，这个值可能是常数，也可能是变量，还可能是一个方法的返回值。
- 举例：a = b + 5;
  - 运算符：=, \+
  - 算子：a, b, 5

### 计算时间差

```c++
#include <stdio.h>

int main()
{
    int hour1, minute1;
    int hour2, minute2;

    scanf("%d %d", &hour1, &minute1);
    scanf("%d %d", &hour2, &minute2);

    int t1 = hour1 * 60 + minute1;
    int t2 = hour2 * 60 + minute2;
    int diff = t2 - t1;

    printf("时间差是%d小时%d分钟。\n", diff / 60, diff % 60);

    return 0;
}
```

- hour1 \* 60 + minute1 => 转换为分钟单位
- t / 60 => 小时部分；t % 60 => 分钟部分

## 运算符优先级

| 优先级 | 运算符 | 运算     | 结合关系 | 举例  |
| ------ | ------ | -------- | -------- | ----- |
| 1      | +      | 单目不变 | 自右向左 | a\*+b |
| 1      | -      | 单目取负 | 自右向左 | a\*-b |
| 2      | \*     | 乘       | 自左向右 | a\*b  |
| 2      | /      | 除       | 自左向右 | a/b   |
| 2      | %      | 取余     | 自左向右 | a%b   |
| 3      | +      | 加       | 自左向右 | a+b   |
| 3      | -      | 减       | 自左向右 | a-b   |
| 4      | =      | 赋值     | 自右向左 | a=b   |

### 求平均值

- 写一个程序，输入两个整数，输出它们的平均值

```c++
#include <stdio.h>

int main()
{
    int a, b;

    scanf("%d %d", &a, &b);

    double c = (a + b) / 2.0;

    printf("%d和%d的平均值=%lf\n", a, b, c);

    return 0;
}
```

### 赋值运算符

- 赋值也是运算，也有结果
- a=6 的结果是 a 被赋予的值，也就是 6
- a=b=6 => a=(b=6)

#### 嵌入式赋值

```c++
int a = 6;
int b;
int c = 1 + (b = a);

result = a = b = 3 + c;
result = 2;
result = (result = result * 2) * 6 * (result = 3 + result);
```

- 不利于阅读
- 容易产生错误

### 结合关系

- 一般是自左向右
- 单目（+-）和赋值（=）是自右向左

## 交换变量

- 程序表达的是顺序执行的动作，而不是关系
- a=b;
- b=a;
- 是依次执行的，结果使得 a 和 b 都得到 b 原来的值

因此想要交换变量，需要使用第三个变量（临时变量、中间变量）来暂时存放 a 或者 b 的值：

```c++
#include <stdio.h>

int main()
{
    int a = 5;
    int b = 6;
    int t;

    printf("交换前：a=%d b=%d\n", a, b);

    // 将 a 的值暂时存放到 t 中
    t = a;
    // a 的值做过备份后，将 b 的值赋值给 a
    a = b;
    // 最后将 a 备份的值 t 赋值给 b
    b = t;

    printf("交换后：a=%d b=%d\n", a, b);

    return 0;
}
```

## 复合赋值

- 5 个运算符，加（“+”）减（“-”）乘（“\*”）除（“/”）取余（“%”），可以和赋值运算符“=”结合起来，形成复合赋值运算符：
  - +=
  - -=
  - \*=
  - /=
  - %=
- total += 5;
  - 等价于：total = total + 5;
- total += (sum + 100) / 2;
  - 等价于：total = total + (sum + 100) / 2;
- total \*= sum + 12;
  - 等价于：total = total \* (sum + 12);
- 注意两个运算符中间不要有空格

## 递增递减运算符

- 递增（“++”）和递减（“--”）运算符是两个很特殊的运算符，它们是单目元素符（只有一个算子），这个算子还必须是变量。它们的作用就是给这个变量+1 或者-1。
- count++;
  - 等价于：count += 1;
  - 等价于：count = count + 1;
- 这两个运算符有其历史来源
- 可以单独使用，但是不要组合进表达式
  - ++i++-->?
  - i++++\_\_>?
  - a = b += c++ - d + --e / -f

### 前缀后缀

- 递增（“++”）和递减（“--”）运算符可以放在变量的前面，叫做前缀形式，也可以放在变量的后面，叫做后缀形式。
- a++ 的值是 a+1 以前的值，而 ++a 的值是加了 1 以后的值，结果不同。但是不论哪个，a 自己的值都加了 1

```c++
#include <stdio.h>

int main()
{
    int a = 10;

    printf("a++=%d\n", a++);
    printf("a=%d\n", a);

    printf("++a=%d\n", ++a);
    printf("a=%d\n", a);

    return 0;
}
```

输出：

```
a++=10
a=11
++a=12
a=12
```

| 表达式  | 运算          | 表达式的值       |
| ------- | ------------- | ---------------- |
| count++ | 给 count 加 1 | count 原来的值   |
| ++count | 给 count 加 1 | count+1 以后的值 |
| count-- | 给 count 减 1 | count 原来的值   |
| --count | 给 count 减 1 | count-1 以后的值 |
