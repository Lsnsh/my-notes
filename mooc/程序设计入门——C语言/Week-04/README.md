# 进一步判断与循环

## 逻辑类型和运算

### 逻辑类型

### 逻辑运算

#### 优先级

| 优先级 | 运算符            | 结合性                    |
| ------ | ----------------- | ------------------------- |
| 1      | ()                | 从左到右                  |
| 2      | ! + - ++ --       | 从右到左（单目的 + 和 - ) |
| 3      | \* / %            | 从左到右                  |
| 4      | + -               | 从左到右                  |
| 5      | < <= > >=         | 从左到右                  |
| 6      | == !=             | 从左到右                  |
| 7      | &&                | 从左到右                  |
| 8      | \|\|              | 从左到右                  |
| 9      | = += -= \*= /= %= | 从右到左                  |

#### 短路

### 条件运算符

?

### 逗号运算符

```c++
int a = (3+4, 5+6);

printf("%d\n", a == 11); // 1
```

## 级联和嵌套的判断

```
if
else
```

```
if
else if
else
```

## 多路分支

**switch-case：**

```c++
switch(控制表达式)
{
case 常量:
    语句
    ...
case 常量:
    语句
    ...
default:
    语句
}
```

- 控制表达式只能是整数型的结果
- 常量可以是常数，也可以是常数计算的表达式

**break：**

```c++
#include <stdio.h>

int main()
{
    int type;

    scanf("%d", &type);

    switch (type)
    {
    case 1:
    case 2:
        printf("你好\n");
        break;
    case 3:
        printf("晚上好\n");
    case 4:
        printf("再见\n");
        break;
    default:
        printf("啊，什么啊？\n");
    }

    return 0;
}
```

- switch 语句可以看作是一种基于计算的跳转，计算控制表达式的值后，程序会跳转到相匹配的 case（分支标号）处。
- 分支标号只是说明 switch 内部位置的路标，在执行完分支中的最后一条语句后，如果后面没有 break，就会顺序执行到下面的 case 里去，直到遇到一个 break，或者 switch 结束为止。

## 循环的例子

```c++
int count = 100;
while(count >= 0)
{
    count--;
    printf("%d\n", count);
}
```

- 这个循环要执行多少次？
- 循环停下来的时候，有没有输出最后的 0？
- 循环结束后，count 的值是多少？

### 算平均数

```c++
#include <stdio.h>

int main()
{
    int number;
    int sum = 0, count = 0;

    scanf("%d", &number);
    while (number != -1)
    {
        sum += number;
        count++;
        scanf("%d", &number);
    }

    // 不带小数点：
    // printf("平均数是：%d\n", sum / count);

    // 带小数点：
    printf("平均数是：%f\n", 1.0 * sum / count);

    return 0;
}
```

### 猜数游戏

- 让计算机来想一个数，然后让用户来猜，用户每输入一个数，就告诉它是大了还是小了，直到用户猜中为止，最后还要告诉用户他猜了多少次。
- 因为需要不断重复让用户猜，所以需要用到循环
- 在实际写出程序之前，我们可以先用文字描述程序的思路
- 核心重点是循环的条件
  - 热门往往会考虑循环终止的条件
- 设计
  1. 计算机随机想一个数，记在变量 number 里；
  2. 一个负责记次数的变量 count 初始化为 0；
  3. 让用户输入一个数字 a；
  4. count 递增（加一）；
  5. 判断 a 和 number 的大小关系，如果 a 大，就输出“大”，如果 a 小就输出“小”；
  6. 如果 a 和 number 是不相等的（无论大还是小），程序转回到第三步；
  7. 否则，a 等于 number，程序输出“猜中”和次数，然后结束。

**生成随机整数：**

```c++
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    srand(time(0));
    int number = rand();

    printf("%d\n", number);
    // 向 100 取余，得到100以内的随机数
    printf("%d\n", number % 100);

    return 0;
}
```

**完整代码：**

```c++
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    srand(time(0));
    // 向 100 取余，得到100以内的随机数
    int number = rand() % 100 + 1;
    int a, count = 0;

    printf("我已经想好了一个1到100之间的数。\n");

    while (a != number)
    {
        printf("请猜猜这个1到100之间的数：");
        scanf("%d", &a);

        count++;

        if (a > number)
        {
            printf("大\n");
        }
        else
        {
            printf("小\n");
        }
    }

    printf("太好了，你用了%d次就猜到了答案。\n", count);

    return 0;
}
```

**讨论题：**

使用正确的猜法，为什么 100 以内的数猜 7 次就够了？

```
因为 2^6 < 100 < 2^7，所以二分法最多7次
```

### 整数求逆

**整数的分解：**

- 一个整数是有 1 至多个数字组成的，如何分解出整数的各个位上的数字，然后加以计算
  - 对一个整数做 %10 的操作，就得到它的个位数；
  - 对一个整数做 /10 的操作，就去掉了它的个位数；
  - 然后再对第二步的结果做 %10 的操作，就得到原来数的十位数了；
  - 依此类推；

**数的逆序：**

- 输入一个正整数，输出逆序的数
  - 结尾的 0 的处理

## 判断和循环常见的错误

### if 语句常见的错误

- 忘了大括号
  - 不带大括号，只会执行 if 语句后的一条语句
  - 永远在 if 和 else 后面加上大括号，即使当时后面只有一条语句
- if 后面不要有分号
- 错误的使用 == 和 =
- 让人困惑的 else
